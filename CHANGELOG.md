# 更新日志

本文档记录项目的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [1.2.0] - 2025-12-11

### 新增
- 📝 添加完整的《项目需求与解决方案》文档
  - 详细的需求分析（基础+进阶）
  - 完整的系统架构设计
  - 循迹、显示、通信、控制的实现方案
  - 上位机设计方案（Python示例）
  - 进阶功能实现（OLED增强、多路线、避障）
  - 丰富的附录资源（采购清单、命令速查、故障诊断）

- 📝 完善《Git协作规范》文档
  - 详细的分支工作流程
  - 三种分支合并方法（PR、本地、Rebase）
  - 合并冲突处理详解
  - 分支管理最佳实践
  - 多人协作分支策略
  - 10个实战场景演练
  - 常见错误及解决方案

- 📚 新增《文档导航》
  - 快速查找文档
  - 按需求分类索引
  - 关键词索引
  - 学习路径推荐

- 📋 新增 CHANGELOG.md（本文件）

### 修复
- 🐛 修复循迹左转问题
  - 原因：速度限幅逻辑不允许速度低于PWM_SPEED_MIN
  - 解决：允许速度降到0，实现更大的转向差速

- 🐛 修复传感器权重符号错误
  - 原因：左右权重符号反了
  - 解决：左侧权重为负值，右侧为正值

### 优化
- ⚡ 优化PID参数
  - Kp: 2.5 → 7.5（提高响应速度）
  - Kd: 15.0（保持不变）
  - BASE_SPEED: 2500 → 4000（提高基础速度）

- 📝 更新README.md
  - 添加项目需求说明
  - 添加快速开始指南
  - 添加项目结构说明
  - 完善文档导航
  - 添加常见问题FAQ
  - 添加贡献指南

### 文档
- 📖 整合所有文档到统一结构
- 📖 添加文档版本号和更新日期
- 📖 添加文档目录和导航
- 📖 完善代码示例和注释

---

## [1.1.0] - 2025-12-10

### 新增
- ✨ HC-05蓝牙控制功能
  - 多模式切换（停止/循迹/手动/避障）
  - 手动遥控（前进/后退/左转/右转）
  - 实时命令响应

- ✨ HC-SR04超声波测距功能
  - 微秒级精确延时（TIM1）
  - 超时保护机制
  - 串口调试输出

- ✨ 串口通信功能
  - UART1配置（115200波特率）
  - 中断接收方式
  - 状态上报功能

### 修复
- 🔧 修复PWM频率问题
  - 原因：TIM2 Prescaler配置错误
  - 解决：Prescaler从7199改为71，实现100Hz PWM

- 🔧 修复TIM1配置问题
  - 原因：Prescaler配置不正确
  - 解决：Prescaler设为71，实现1μs精度延时

- 🔧 修复注释乱码问题
  - 原因：文件编码不统一
  - 解决：统一使用UTF-8编码

### 文档
- 📝 添加蓝牙控制说明文档
- 📝 添加超声波调试说明文档
- 📝 添加PWM频率修复总结
- 📝 添加TIM1配置修复说明

---

## [1.0.0] - 2025-12-03

### 新增
- 🎉 项目初始版本
- ✨ 红外循迹功能
  - 5路红外传感器读取
  - 加权误差计算
  - 全黑/全白处理

- ✨ PID控制算法
  - 比例+积分+微分
  - 积分限幅防饱和
  - 差速转向控制

- ✨ 电机控制功能
  - PWM速度控制
  - 方向控制（前进/后退/左转/右转）
  - 差速控制

- ✨ 基础文档
  - README.md
  - Git协作规范.md
  - .gitignore配置

### 硬件
- 🔧 STM32F103C8T6最小系统
- 🔧 L298N电机驱动×2
- 🔧 直流减速电机×2
- 🔧 红外循迹传感器×5
- 🔧 OLED显示屏（I2C）

---

## 版本说明

### 版本号规则
- **主版本号**：重大功能更新或架构变更
- **次版本号**：新功能添加
- **修订号**：Bug修复和小改进

### 更新类型
- ✨ 新增功能
- 🐛 Bug修复
- ⚡ 性能优化
- 🔧 配置修改
- 📝 文档更新
- 🎨 代码格式
- ♻️ 代码重构
- 🔥 移除功能
- 🚀 部署相关

---

## 计划中的功能

### v1.3.0（计划中）
- [ ] 实现站点停靠10秒功能
- [ ] 添加OLED倒计时显示
- [ ] 实现多路线循迹支持
- [ ] 添加超声波避障功能
- [ ] 开发上位机控制程序

### v2.0.0（未来）
- [ ] 添加WiFi通信（ESP8266）
- [ ] 添加摄像头视觉识别
- [ ] 添加速度闭环控制（编码器）
- [ ] 添加多车协同功能
- [ ] 开发手机APP控制

---

## 贡献者

感谢所有为本项目做出贡献的开发者！

- [@weiyongxin2004](mailto:weiyongxin2004@163.com) - 项目维护者

---

**最后更新**：2025年12月11日
